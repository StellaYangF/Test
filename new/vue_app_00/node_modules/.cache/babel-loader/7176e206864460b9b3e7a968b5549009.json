{"remainingRequest":"c:\\Users\\Tedu\\Desktop\\WEB COURSE\\05 WEB_COURSE\\13 VUEUI\\vue_app_00\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!c:\\Users\\Tedu\\Desktop\\WEB COURSE\\05 WEB_COURSE\\13 VUEUI\\vue_app_00\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\Users\\Tedu\\Desktop\\WEB COURSE\\05 WEB_COURSE\\13 VUEUI\\vue_app_00\\vue_app_00\\src\\components\\home\\NewsInfo.vue?vue&type=script&lang=js","dependencies":[{"path":"c:\\Users\\Tedu\\Desktop\\WEB COURSE\\05 WEB_COURSE\\13 VUEUI\\vue_app_00\\vue_app_00\\src\\components\\home\\NewsInfo.vue","mtime":1552294278299},{"path":"c:\\Users\\Tedu\\Desktop\\WEB COURSE\\05 WEB_COURSE\\13 VUEUI\\vue_app_00\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"c:\\Users\\Tedu\\Desktop\\WEB COURSE\\05 WEB_COURSE\\13 VUEUI\\vue_app_00\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"c:\\Users\\Tedu\\Desktop\\WEB COURSE\\05 WEB_COURSE\\13 VUEUI\\vue_app_00\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Toast } from \"mint-ui\";\nexport default {\n  data: function data() {\n    return {\n      // 带参传递的数据也可写在created(){}中\n      nid: this.$route.query.nid,\n      newsItem: {},\n      comment: \"\",\n      list: [],\n      pno: 0,\n      psize: 5\n    };\n  },\n  created: function created() {\n    this.findNewsInfo();\n    this.loadMore();\n  },\n  methods: {\n    findNewsInfo: function findNewsInfo() {\n      var _this = this;\n\n      var reg = /^[0-9]{1,}$/; // 拦截用户非常传参\n\n      if (!reg.test(this.nid)) {\n        Toast(\"新闻查询格式不正确！\");\n        return;\n      }\n\n      this.axios.get(\"http://localhost:3000/newsInfo?nid=\".concat(this.nid)).then(function (res) {\n        _this.newsItem = res.data;\n      });\n    },\n    addcomment: function addcomment() {\n      var _this2 = this;\n\n      // 去除评论两端的空格\n      // var com=this.comment.replace(/^\\s+|\\s+$/g,\"\");\n      var com = this.comment.trim();\n      var size = com.length; // 判断评论不能为空\n\n      if (size == 0) {\n        Toast(\"评论不能为空\");\n        this.comment = \"\";\n        return;\n      }\n      /*  \r\n      // post方法发送1：\r\n      // 创建postData保存新闻nid评论内容\r\n      var postData=this.qs.stringify({\r\n        nid,\r\n        content:com\r\n      })\r\n      // 发送\r\n      this.axios.post(\"http://localhost:3000/addcomment\",postData).then(res=>{\r\n        Toast(\"评论成功\");\r\n      })\r\n      this.comment=\"\";\r\n       */\n      // post方法发送2：\n\n\n      this.axios.post(\"http://localhost:3000/addcomment\", \"nid=\".concat(this.nid, \"&content=\").concat(com)).then(function (res) {\n        Toast(\"评论成功\"); // 如果评论成功，清空原有发表内容\n\n        _this2.comment = \"\"; // 加载评论列表\n\n        _this2.pno = 0;\n        _this2.list = []; //清空原有数据\n\n        _this2.loadMore();\n      });\n    },\n    loadMore: function loadMore() {\n      var _this3 = this;\n\n      this.pno++;\n      var pno = this.pno,\n          psize = this.psize; // 验证页码和psize\n\n      var reg = /^[0-9]{1,}$/;\n\n      if (!reg.test(pno)) {\n        Toast(\"页码格式不正确\");\n        return;\n      }\n\n      if (!reg.test(psize)) {\n        Toast(\"页面显示数量不正确\");\n      }\n\n      this.axios.get(\"http://localhost:3000/getcomment?nid=\".concat(this.nid, \"&pno=\").concat(pno, \"&psize=\").concat(psize)).then(function (res) {\n        var list = _this3.list.concat(res.data.data);\n\n        _this3.list = list;\n      });\n    }\n  }\n};",{"version":3,"sources":["NewsInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA,SAAA,KAAA,QAAA,SAAA;AACA,eAAA;AACA,MADA,kBACA;AACA,WAAA;AACA;AACA,WAAA,KAAA,MAAA,CAAA,KAAA,CAAA,GAFA;AAGA,gBAAA,EAHA;AAIA,eAAA,EAJA;AAKA,YAAA,EALA;AAMA,WAAA,CANA;AAOA,aAAA;AAPA,KAAA;AASA,GAXA;AAYA,SAZA,qBAYA;AACA,SAAA,YAAA;AACA,SAAA,QAAA;AACA,GAfA;AAgBA,WAAA;AACA,gBADA,0BACA;AAAA;;AACA,UAAA,MAAA,aAAA,CADA,CAEA;;AACA,UAAA,CAAA,IAAA,IAAA,CAAA,KAAA,GAAA,CAAA,EAAA;AACA,cAAA,YAAA;AACA;AACA;;AACA,WAAA,KAAA,CACA,GADA,8CACA,KAAA,GADA,GAEA,IAFA,CAEA,eAAA;AACA,cAAA,QAAA,GAAA,IAAA,IAAA;AACA,OAJA;AAKA,KAbA;AAcA,cAdA,wBAcA;AAAA;;AACA;AACA;AACA,UAAA,MAAA,KAAA,OAAA,CAAA,IAAA,EAAA;AACA,UAAA,OAAA,IAAA,MAAA,CAJA,CAKA;;AACA,UAAA,QAAA,CAAA,EAAA;AACA,cAAA,QAAA;AACA,aAAA,OAAA,GAAA,EAAA;AACA;AACA;AACA;;;;;;;;;;;;;AAcA;;;AACA,WAAA,KAAA,CACA,IADA,CAEA,kCAFA,gBAGA,KAAA,GAHA,sBAGA,GAHA,GAKA,IALA,CAKA,eAAA;AACA,cAAA,MAAA,EADA,CAEA;;AACA,eAAA,OAAA,GAAA,EAAA,CAHA,CAIA;;AACA,eAAA,GAAA,GAAA,CAAA;AACA,eAAA,IAAA,GAAA,EAAA,CANA,CAMA;;AACA,eAAA,QAAA;AACA,OAbA;AAcA,KAtDA;AAuDA,YAvDA,sBAuDA;AAAA;;AACA,WAAA,GAAA;AACA,UAAA,MAAA,KAAA,GAAA;AAAA,UACA,QAAA,KAAA,KADA,CAFA,CAIA;;AACA,UAAA,MAAA,aAAA;;AACA,UAAA,CAAA,IAAA,IAAA,CAAA,GAAA,CAAA,EAAA;AACA,cAAA,SAAA;AACA;AACA;;AACA,UAAA,CAAA,IAAA,IAAA,CAAA,KAAA,CAAA,EAAA;AACA,cAAA,WAAA;AACA;;AACA,WAAA,KAAA,CACA,GADA,gDAGA,KAAA,GAHA,kBAIA,GAJA,oBAIA,KAJA,GAMA,IANA,CAMA,eAAA;AACA,YAAA,OAAA,OAAA,IAAA,CAAA,MAAA,CAAA,IAAA,IAAA,CAAA,IAAA,CAAA;;AACA,eAAA,IAAA,GAAA,IAAA;AACA,OATA;AAUA;AA9EA;AAhBA,CAAA","sourcesContent":["<template>\r\n  <div class=\"app-newsInfo\">\r\n    <h1>News Details</h1>\r\n    <div class=\"mui-card\">\r\n      <div\r\n        class=\"mui-card-header mui-card-media\"\r\n        :style=\"'height:40vw;background-image:url('+newsItem.img_url+')'\"\r\n      ></div>\r\n      <div class=\"mui-card-content\">\r\n        <div class=\"mui-card-content-inner\">\r\n          <p>{{newsItem.ctime|dateFilter}}</p>\r\n          <p style=\"color: #333;\">{{newsItem.content}}</p>\r\n        </div>\r\n      </div>\r\n      <div class=\"mui-card-footer\">\r\n        <a class=\"mui-card-link\">Like</a>\r\n        <a class=\"mui-card-link\">Read more</a>\r\n      </div>\r\n    </div>\r\n    <!-- 评论区开始 -->\r\n    <div class=\"mui-card-content\">\r\n      <div class=\"mui-card-content-inner\">\r\n        <textarea placeholder=\"请吐槽最多120个字\" maxlength=\"120\" v-model=\"comment\"></textarea>\r\n        <mt-button size=\"large\" type=\"primary\" @click=\"addcomment\">发表评论</mt-button>\r\n      </div>\r\n    </div>\r\n    <!-- 评论区结束 -->\r\n    <!-- 评论列表开始 -->\r\n    <div class=\"mui-card\">\r\n      <div class=\"mui-card-content\">\r\n        <div class=\"mui-card-content-inner\">\r\n          <div class=\"cmt-list\">\r\n            <div class=\"cmt-item\" v-for=\"(item,i) of list\">\r\n              <div>第{{i+1}}楼 发表时间：{{item.ctime | dateFilter}}</div>\r\n              <div>{{item.content}}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- 记载更多 start -->\r\n      <mt-button size=\"large\" type=\"primary\" @click=\"loadMore\">查看更多评论</mt-button>\r\n      <!-- 记载更多 end -->\r\n    </div>\r\n    <!-- 评论列表结束 -->\r\n  </div>\r\n</template>\r\n<script>\r\nimport { Toast } from \"mint-ui\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 带参传递的数据也可写在created(){}中\r\n      nid: this.$route.query.nid,\r\n      newsItem: {},\r\n      comment: \"\",\r\n      list: [],\r\n      pno: 0,\r\n      psize: 5\r\n    };\r\n  },\r\n  created() {\r\n    this.findNewsInfo();\r\n    this.loadMore();\r\n  },\r\n  methods: {\r\n    findNewsInfo() {\r\n      var reg = /^[0-9]{1,}$/;\r\n      // 拦截用户非常传参\r\n      if (!reg.test(this.nid)) {\r\n        Toast(\"新闻查询格式不正确！\");\r\n        return;\r\n      }\r\n      this.axios\r\n        .get(`http://localhost:3000/newsInfo?nid=${this.nid}`)\r\n        .then(res => {\r\n          this.newsItem = res.data;\r\n        });\r\n    },\r\n    addcomment() {\r\n      // 去除评论两端的空格\r\n      // var com=this.comment.replace(/^\\s+|\\s+$/g,\"\");\r\n      var com = this.comment.trim();\r\n      var size = com.length;\r\n      // 判断评论不能为空\r\n      if (size == 0) {\r\n        Toast(\"评论不能为空\");\r\n        this.comment = \"\";\r\n        return;\r\n      }\r\n      /*  \r\n      // post方法发送1：\r\n      // 创建postData保存新闻nid评论内容\r\n      var postData=this.qs.stringify({\r\n        nid,\r\n        content:com\r\n      })\r\n      // 发送\r\n      this.axios.post(\"http://localhost:3000/addcomment\",postData).then(res=>{\r\n        Toast(\"评论成功\");\r\n      })\r\n      this.comment=\"\";\r\n       */\r\n\r\n      // post方法发送2：\r\n      this.axios\r\n        .post(\r\n          \"http://localhost:3000/addcomment\",\r\n          `nid=${this.nid}&content=${com}`\r\n        )\r\n        .then(res => {\r\n          Toast(\"评论成功\");\r\n          // 如果评论成功，清空原有发表内容\r\n          this.comment = \"\";\r\n          // 加载评论列表\r\n          this.pno = 0;\r\n          this.list = []; //清空原有数据\r\n          this.loadMore();\r\n        });\r\n    },\r\n    loadMore() {\r\n      this.pno++;\r\n      var pno = this.pno,\r\n        psize = this.psize;\r\n      // 验证页码和psize\r\n      var reg = /^[0-9]{1,}$/;\r\n      if (!reg.test(pno)) {\r\n        Toast(\"页码格式不正确\");\r\n        return;\r\n      }\r\n      if (!reg.test(psize)) {\r\n        Toast(\"页面显示数量不正确\");\r\n      }\r\n      this.axios\r\n        .get(\r\n          `http://localhost:3000/getcomment?nid=${\r\n            this.nid\r\n          }&pno=${pno}&psize=${psize}`\r\n        )\r\n        .then(res => {\r\n          var list = this.list.concat(res.data.data);\r\n          this.list = list;\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style>\r\n</style>\r\n"],"sourceRoot":"src\\components\\home"}]}