(() => {
    /***** document content padding *****/
    $elem = $(`    <!-- top navbar -->
    <header id="header"></header>
    <div class=" log_container collapse"></div>
    <!-- carousel slide -->
    <div class="z_floor ">
    <div class=" carousel ">
        <ul class=" carousel_group ">
            <li class=" carousel_item ">
                <a href=" javascript:; " class=" carousel_item_link "><img src=" img/eifini/fashion_slide1.jpg " alt=" fashion_slide3.jpg "></a>
            </li>
            <li class=" carousel_item ">
                <a href=" javascript:; " class=" carousel_item_link "><img src="img/eifini/fashion_slide2.jpg " alt=" fashion_slide1.jpg "></a>
            </li>
            <li class=" carousel_item " <li class=" carousel_item ">
                <a href=" javascript:; " class=" carousel_item_link "><img src=" img/eifini/fashion_slide3.jpg" alt=" fashion_slide1.jpg "></a>
            </li>
            <!-- <li class=" carousel_item " <li class=" carousel_item ">
                <a href=" javascript:; " class=" carousel_item_link "><img src=" img/eifini/fashion_slide4.jpg" alt=" fashion_slide1.jpg "></a>
            </li> -->
        </ul>
        <div class="btn_group ">
            <button class="prev ">&lt;</button>
            <button class="next ">&gt;</button>
        </div>
    </div>
    <!-- summer collection -->
    <div class="ad ">
        <h1 class="ad_title ">夏日新品</h1>
        <a href="javascript:; " class="btn btn_lg ">立即购买</a>
    </div>
</div>
    <!-- first floor -->
    <div class="first_floor ">
        <div class="img_content img_1">
            <img src=" img/fashion/fashion_home/banner1.jpg " alt=" banner1 " class="img_hover">
        </div>
        <div class="img_content img_2">
            <img src=" img/fashion/fashion_home/banner2.jpg " alt=" banner2 " class="img_hover">
        </div>
        <ul class="ff_card ">
            <li class="card_content1 ">夏日更新</li>
            <li class="card_content2 ">爆款新品</li>
            <li>
                <a href=" javascript:; " class="btn btn_sm ">选购男士</a>
                <a href=" javascript:; " class="btn btn_sm ">选购女士</a>
            </li>
        </ul>
        <div class="img_content img_3">
            <img src=" img/fashion/fashion_home/banner3.jpg " alt=" banner3 " class="img_hover">
        </div>
    </div>
    <!-- second floor -->
    <div class=" second_floor ">
        <div class="btn_group btn1 ">
            <button class="prev left">&lt;</button>
            <button class="next right">&gt;</button>
        </div>
        <div class="container ">
            <div class="lb_group ">
                <div class="lb_item one">
                    <img src="img/fashion/fashion_home/lookbook1.jpg " alt="1">
                    <div class="lb_content ">
                        <h3>你的夏日形象</h3>
                        <P>打造你的时尚夏日形象！</P>
                    </div>
                </div>
                <div class="lb_item two" >
                    <img src="img/fashion/fashion_home/lookbook2.jpg " alt="2">
                    <div class="lb_content ">
                        <h3>创造你自己的风格</h3>
                        <P>穿上我们的新款休闲系列，成为更棒的自己！</P>
                    </div>
                </div>
                <div class="lb_item three" >
                    <img src="img/fashion/fashion_home/lookbook3.jpg " alt="3">
                    <div class="lb_content ">
                        <h3>多彩衣服选择</h3>
                        <P>我们为你手机最独特的衣服和配饰！</P>
                    </div>
                </div>
            </div> 
        </div>
        <ul class=" rcontainer ">
            <li class="img_item "><a href="javascript:; ">
                <img src=" img/fashion/fashion_home/lookbook1_1.jpg " alt="1 " class="img_hover one">
            </a></li>
            <li class="img_item "><a href="javascript:; ">
                <img src=" img/fashion/fashion_home/lookbook1_2.jpg " alt="2 " class="img_hover two">
            </a></li>
            <li class="img_item "><a href="javascript:; ">
                <img src=" img/fashion/fashion_home/lookbook1_3.jpg " alt="3 " class="img_hover three">
            </a></li>
            <li class="img_item "><a href="javascript:; ">
                <img src=" img/fashion/fashion_home/lookbook1_4.jpg " alt="4 " class="img_hover four">
            </a></li>
        </ul>
    </div>
    <!-- third floor -->
    <div class="third_floor module">
        <div class="feature_title">
            <p>明星同款</p>
            <span></span>
        </div>
        <div class="feature_content">
            <ul class="feature_container one">
                <li class="list_item">
                    <a href="javascript:;" class="img_item img_bg ">
                        <img src="img/eifini/md_fashion1.jpg" alt="1" data_src="img/fashion/fashion_women/product_1_back.jpg">
                    </a>
                    <div class="card_body">
                        <p class="pname"><a href="javascript:;">衬衫</a></p>
                        <p class="price">¥19.99</p>
                        <div class="tools">
                            <a href="javascript:;">
                                <span class=" mui-icon mui-icon-extra mui-icon-extra-heart"></span>
                            </a>
                            <a href="javascript:;"><span class="mui-icon mui-icon-search"></span></a>
                            <a id="icon-gear" href="javascript:;"><span class="mui-icon mui-icon-gear"></span></a>
                        </div>
                    </div>
                </li>
                <li class="list_item">
                    <a href="javascript:;" class="img_item img_bg">
                        <img src="img/eifini/md_fashion2.jpg" alt="1" data_src="img/fashion/fashion_women/product_1_back.jpg">
                    </a>
                    <div class="card_body">
                        <p class="pname"><a href="javascript:;">衬衫</a></p>
                        <p class="price">¥19.99</p>
                            <div class="tools">
                                <a href="javascript:;">
                                    <span class=" mui-icon mui-icon-extra mui-icon-extra-heart"></span>
                                </a>
                                <a href="javascript:;"><span class="mui-icon mui-icon-search"></span></a>
                                <a id="icon-gear" href="javascript:;"><span class="mui-icon mui-icon-gear"></span></a>
                            </div>
                    </div>
                </li>
                <li class="list_item">
                        <a href="javascript:;" class="img_item img_bg">
                            <img src="img/eifini/md_fashion3.jpg" alt="1" data_src="img/fashion/fashion_women/product_1_back.jpg">
                        </a>
                        <div class="card_body">
                            <p class="pname"><a href="javascript:;">衬衫</a></p>
                            <p class="price">¥19.99</p>
                            <div class="tools">
                                <a href="javascript:;">
                                    <span class=" mui-icon mui-icon-extra mui-icon-extra-heart"></span>
                                </a>
                                <a href="javascript:;"><span class="mui-icon mui-icon-search"></span></a>
                                <a id="icon-gear" href="javascript:;"><span class="mui-icon mui-icon-gear"></span></a>
                            </div>
                        </div>
                </li> 
                <li class="list_item">
                        <a href="javascript:;" class="img_item img_bg">
                            <img src="img/fashion/fashion_women/product_4_front.jpg" alt="1" data_src="img/fashion/fashion_women/product_1_back.jpg">
                        </a>
                        <div class="card_body">
                            <p class="pname"><a href="javascript:;">衬衫</a></p>
                            <p class="price">¥19.99</p>
                            <div class="tools">
                                <a href="javascript:;">
                                    <span class=" mui-icon mui-icon-extra mui-icon-extra-heart"></span>
                                </a>
                                <a href="javascript:;"><span class="mui-icon mui-icon-search"></span></a>
                                <a id="icon-gear" href="javascript:;"><span class="mui-icon mui-icon-gear"></span></a>
                            </div>
                        </div>
                </li>
            </ul>
        </div>
    </div>
    <!-- fourth floor -->
    <div class="fourth_floor video">
        <video src="video/19yfl-spr.mp4" controls></video>
    </div> 
    <!-- fifth floor -->
    <div class="fifth_floor">
        <ul class="card_container one">
            <li class="card_content one">
                <div class="img_container one">
                    <img src="img/fashion/fashion_home/fashion_home-banner-1.jpg" alt="1">
                </div>
                <div class="card_inner_content one">
                    <span class="line one"></span>
                    <h2>
                        EXCLUSIVE CLOTHING SUMMER COLLECTION 2018</h2>
                    <p>Feel the summer mood with our latest exclusive clothes collection featuring bright colors and hand-painted ornaments!</p>
                    <a href="javascript:;" class="btn">立即购买</a>
                </div>
            </li>
            <li class="card_content two">
                <div class="img_container two">
                    <img src="img/fashion/fashion_home/fashion_home-banner-2.jpg" alt="2">
                </div>
                <div class="card_inner_content two">
                        <span class="line two"></span>
                    <h2>
                        EXCLUSIVE CLOTHING SUMMER COLLECTION 2018</h2>
                    <p>Feel the summer mood with our latest exclusive clothes collection featuring bright colors and hand-painted ornaments!</p>
                    <a href="javascript:;" class="btn">立即购买</a>
                </div>
            </li>
        </ul>
    </div>
    <!-- sixth floor -->
    <div class="sixth_floor module">
            <div class="feature_title">
                <p>当下流行款</p>
            </div>
                <ul class="feature_container two">
                </ul>
    </div>
    <!-- import footer  -->
    <footer></footer>`);
    $("body").prepend($elem);

    // database get list
    $.ajax({
        url: 'http://localhost:3000/product/list',
        type: 'get',
        dataType: 'json',
        data: { pno: 1, psize: 6 }
    }).then((res) => {
        var list = res.data;
        var html = '';
        for (var item of list) {
            html += `<li class="list_item"><a href="http://localhost:3000/productDetails.html?pid=${item.pid}"class="img_item img_bg "><img src=${item.img_front} 
           data-imgFront=${item.img_front} data-imgBack=${item.img_back} alt=${item.pid} ></a><div class="card_body"><p class="pname"><a href="javascript:;">${item.pname}</a></p><p class="price">¥${item.price.toFixed(2)}</p><div class="tools"><a href="javascript:;"><span class=" mui-icon mui-icon-extra mui-icon-extra-heart"></span></a><a href="javascript:;"><span class="mui-icon mui-icon-search"></span></a><a id="icon-gear" href="javascript:;"><span class="mui-icon mui-icon-gear"></span></a></div></div></li>`
        };
        $('.feature_container.two').html(html)
            // list_item hover event
            .on('mouseenter', 'img', function () {
                var src = $(this).attr('data-imgBack');
                $(this).attr({ src })
            })
            .on('mouseleave', 'img', function () {
                var src = $(this).attr('data-imgFront');
                $(this).attr({ src })
            });
    })

    Utils.importHtml(EnvInfo.headerUrl, EnvInfo.headerHtml)
    Utils.importHtml(EnvInfo.footerUrl, EnvInfo.footerHtml)
    Utils.importHtml(EnvInfo.loginUrl, EnvInfo.loginHtml)


    /*****window load finished then invoke the slide*******/
    $(window).load(() => {
        Utils.slide(6000)
        // 轮播上下页按钮
        $('.prev').click(() => {
            $('.carousel_group')
                .animate({ marginLeft: '-1500px' }, 800, () => {
                    $('.carousel_item:first').appendTo('.carousel_group');
                    $('.carousel_group')
                        .css({ marginLeft: 0 })
                })
        })
        // .next
        $('.next').click(() => {
            $('.carousel_group').prepend($('.carousel_item:last'))
                .css({ marginLeft: '-1500px' })
                .animate({ marginLeft: 0 }, 800)
        })

        // 夏日新品左右按钮滑动效果
        var moved = 1,
            marginLeft;
        $('.left').prop('disabled', true).addClass('noHover')
        $('.right').click(() => {
            marginLeft = -moved * 1000 + 'px';
            moved++;
            $('.lb_group ').animate({ marginLeft }, 800, () => {
                if (moved == 2) {
                    $('.left').prop('disabled', false).removeClass('noHover')
                    $('.img_hover.one').attr({ src: `img/fashion/fashion_home/lookbook${moved}_1.jpg ` });
                    $('.img_hover.two').attr({ src: `img/fashion/fashion_home/lookbook${moved}_2.jpg ` });
                    $('.img_hover.three').attr({ src: `img/fashion/fashion_home/lookbook${moved}_3.jpg ` });
                    $('.img_hover.four').attr({ src: `img/fashion/fashion_home/lookbook${moved}_4.jpg ` });
                }
                if (moved == 3) {
                    $('.right').prop('disabled', true).addClass('noHover');
                    $('.img_hover.one').attr({ src: `img/fashion/fashion_home/lookbook${moved}_1.jpg ` });
                    $('.img_hover.two').attr({ src: `img/fashion/fashion_home/lookbook${moved}_2.jpg ` });
                    $('.img_hover.three').attr({ src: `img/fashion/fashion_home/lookbook${moved}_3.jpg ` });
                    $('.img_hover.four').attr({ src: `img/fashion/fashion_home/lookbook${moved}_4.jpg ` });
                }
            })
        })

        $('.left').click(() => {
            moved--;
            marginLeft = -(moved-1) * 1000 + 'px';
            $('.lb_group ').animate({ marginLeft }, 800, () => {
                if (moved == 2) {
                    $('.right').prop('disabled', false).removeClass('noHover')
                    $('.img_hover.one').attr({ src: `img/fashion/fashion_home/lookbook${moved}_1.jpg ` });
                    $('.img_hover.two').attr({ src: `img/fashion/fashion_home/lookbook${moved}_2.jpg ` });
                    $('.img_hover.three').attr({ src: `img/fashion/fashion_home/lookbook${moved}_3.jpg ` });
                    $('.img_hover.four').attr({ src: `img/fashion/fashion_home/lookbook${moved}_4.jpg ` });
                }
                if (moved == 1) {
                    $('.left').prop('disabled', true).addClass('noHover');
                    $('.img_hover.one').attr({ src: `img/fashion/fashion_home/lookbook${moved}_1.jpg ` });
                    $('.img_hover.two').attr({ src: `img/fashion/fashion_home/lookbook${moved}_2.jpg ` });
                    $('.img_hover.three').attr({ src: `img/fashion/fashion_home/lookbook${moved}_3.jpg ` });
                    $('.img_hover.four').attr({ src: `img/fashion/fashion_home/lookbook${moved}_4.jpg ` });
                }
            })
        })

    });

    /***** fifth floor card_container hover  *****/
    $(".card_content.one")
        .mouseenter(() => {
            $(".line.one").css({
                width: "300px"
            })
        })
        .mouseleave(() => {
            $(".line.one").css({
                width: "500px"
            })
        });
    $(".card_content.two")
        .mouseenter(() => {
            $(".line.two").css({
                width: "300px"
            })
        })
        .mouseleave(() => {
            $(".line.two").css({
                width: "500px"
            })
        });

})()